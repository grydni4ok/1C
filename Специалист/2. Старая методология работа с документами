Самое первое - это прудусматриваем возмоть работы со складами. Если необходимо создаем новый справочник склад, затем добавляем соответсвующий реквизит в приходных и расходных накладных, а так же в регистре оборотов.

В приходных накладных сделаем автоматическую возможность расчета суммы при измении полей "количество" и "цена". Для поля суммы отключаем режим доступности, чтобы его нельзя было редактировать. Сумму документа будем вычислять в подвале. Для этого табличной части на форме ставим галочку на пункте "подвал". Затем у поля "сумма" указываем ПутьКДаннымПодвала, и выбираем там ИтогСумма. В модуле объекта перед записью определяем реквизит СуммаПоДокументу:   
  ЭтотОбъект.СуммаПоДокументу = ЭтотОбъект.СписокНоменклатуры.Итог("Сумма"); 
Включаем проверку всех полей на заполненость, а так же проверку заполнения для самой табличной части. В конструкторе движений создаем движения для приходных накладных.

Для Расходных накладных повторяем все те же операции, что и для приходных.
Затем нужно написать запрос, проверяющий хватает ли продукции на складах для расходной накладной. Не забываем указаывать отборы для виртуальной таблицы. Использовать момент времени, индексацию, проверку ЕСТЬNULL, и вместо вывода Номенклатура использовать НоменклатураПредставление
Так же не забываем вначале проведения, прописать операции для удаления движений совершенных этим документом:
  Движения.ОстаткиНоменклатуры.Записывать = Истина;
  Движения.Записать();
Управляемые блокировки для проведения документа. Режим исключительный применяется всегда, когда нужен контроль остатков.
  БлокировкаДанных = Новый БлокировкаДанных;
	ЭлементБлокировки = БлокировкаДанных.Добавить("РегистрНакопления.ОстаткиНоменклатуры");
	ЭлементБлокировки.Режим = РежимБлокировкиДанных.Исключительный;
	ЭлементБлокировки.УстановитьЗначение("Склад", Склад);
	ЭлементБлокировки.ИсточникДанных = СписокНоменклатуры; //табличная часть в которой хрнаится нужное нам поле "Номенклатура"
	ЭлементБлокировки.ИспользоватьИзИсточникаДанных("Номенклатура", "Номенклатура");
	БлокировкаДанных.Заблокировать();
